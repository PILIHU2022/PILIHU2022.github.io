<!DOCTYPE html>
<html lang="zh-cn">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>实现自动更新Blog(actions-gh-page) | Welcome to my blog!</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="简介 群友“竹林里有冰”的Blog有一个部署方案，如下： 我的博客部署方案
开始码GitHub Actions代码 如果不想写的话可以借鉴： 1 PILIHU2022.github.io/Actions 2 竹林里有冰的代码
安装Node.js 由于GitHub Actions没法使用Ubuntu的apt包管，所以只能使用actions/nodejs，使用@来指定版本，我这里指定的是version 3中的Node.js 21版本，代码中的actions/checkout只用于切换到该仓库;
安装相关依赖 你需要将你本地仓库中的package.json添加到GitHub仓库中，代码中是这样的:
- name: Install Dependencies run: npm install; # 分号不可省略，否则将会被识别成一条命令 npm update # 更新安装的软件（Hexo等） 为每个文件重新设定最后修改时间 这一步其实是挺重要的，Hexo框架生成每篇文章的最后修改时间的依据是该文件的最后修改时间，而对于 Github Action 的容器来说，每一个文件都刚刚被下载下来，都是最新的，这就会导致你的每一篇文章每次部署时都会被认为刚才修改过。 我们这边可以直接使用 git 记录的时间来作为文件的最后修改时间。
设置时区 Blog基本都是用来给自己看的 所以时区当然要设置成中国标准时间（东八区） 使用
export = TZ=&#39;Asia/Shanghai&#39; 生成网页 yarn build 如果不需要部署到VPS的到此处就可以了
以下是使用GitHub Pages来更新Blog（该段未完成） 若想部署到VPS，参考部署到VPS
Q:为什么我已经将GitHub Actions搞定了，且将博文上传至GitHub仓库了，但是没有更新，GitHub Actions也没有报错 A:请检查你的GitHub Pages设置（位置在Settings &gt; Pages）中的“Build and deployment”，在source中选择Deploy from a branch
将Blog部署到VPS 我懒得写，而且没有VPS，所以就直接引用竹林里有冰的内容 初始化 Github Action 容器上的 ssh 私钥应当在 Github 仓库的设置里先新建一个 secret，填入自己的 ssh 私钥（更加标准的做法应当是为 github action 专门生成一对 ssh 密钥，将公钥上传到自己的 vps，将私钥上传到 Github 仓库的 secret 中）。 我这边直接从点墨阁那边抄了点代码直接用。 使用 hexo 的 deploy 插件调用 rsync 将静态文件上传到自己服务器的对应目录（static server 你应当已经设置好了）">
    <meta name="generator" content="Hugo 0.128.2">
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >



    

    
      

    

    

    
      <link rel="canonical" href="http://localhost:1313/posts/auto-update-bloggithub-actions&#43;actions-gh-page/">
    

    <meta property="og:url" content="http://localhost:1313/posts/auto-update-bloggithub-actions&#43;actions-gh-page/">
  <meta property="og:site_name" content="Welcome to my blog!">
  <meta property="og:title" content="实现自动更新Blog(actions-gh-page)">
  <meta property="og:description" content="简介 群友“竹林里有冰”的Blog有一个部署方案，如下： 我的博客部署方案
开始码GitHub Actions代码 如果不想写的话可以借鉴： 1 PILIHU2022.github.io/Actions 2 竹林里有冰的代码
安装Node.js 由于GitHub Actions没法使用Ubuntu的apt包管，所以只能使用actions/nodejs，使用@来指定版本，我这里指定的是version 3中的Node.js 21版本，代码中的actions/checkout只用于切换到该仓库;
安装相关依赖 你需要将你本地仓库中的package.json添加到GitHub仓库中，代码中是这样的:
- name: Install Dependencies run: npm install; # 分号不可省略，否则将会被识别成一条命令 npm update # 更新安装的软件（Hexo等） 为每个文件重新设定最后修改时间 这一步其实是挺重要的，Hexo框架生成每篇文章的最后修改时间的依据是该文件的最后修改时间，而对于 Github Action 的容器来说，每一个文件都刚刚被下载下来，都是最新的，这就会导致你的每一篇文章每次部署时都会被认为刚才修改过。 我们这边可以直接使用 git 记录的时间来作为文件的最后修改时间。
设置时区 Blog基本都是用来给自己看的 所以时区当然要设置成中国标准时间（东八区） 使用
export = TZ=&#39;Asia/Shanghai&#39; 生成网页 yarn build 如果不需要部署到VPS的到此处就可以了
以下是使用GitHub Pages来更新Blog（该段未完成） 若想部署到VPS，参考部署到VPS
Q:为什么我已经将GitHub Actions搞定了，且将博文上传至GitHub仓库了，但是没有更新，GitHub Actions也没有报错 A:请检查你的GitHub Pages设置（位置在Settings &gt; Pages）中的“Build and deployment”，在source中选择Deploy from a branch
将Blog部署到VPS 我懒得写，而且没有VPS，所以就直接引用竹林里有冰的内容 初始化 Github Action 容器上的 ssh 私钥应当在 Github 仓库的设置里先新建一个 secret，填入自己的 ssh 私钥（更加标准的做法应当是为 github action 专门生成一对 ssh 密钥，将公钥上传到自己的 vps，将私钥上传到 Github 仓库的 secret 中）。 我这边直接从点墨阁那边抄了点代码直接用。 使用 hexo 的 deploy 插件调用 rsync 将静态文件上传到自己服务器的对应目录（static server 你应当已经设置好了）">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-01-12T22:47:52+00:00">
    <meta property="article:modified_time" content="2024-01-12T22:47:52+00:00">
    <meta property="article:tag" content="Blog">

  <meta itemprop="name" content="实现自动更新Blog(actions-gh-page)">
  <meta itemprop="description" content="简介 群友“竹林里有冰”的Blog有一个部署方案，如下： 我的博客部署方案
开始码GitHub Actions代码 如果不想写的话可以借鉴： 1 PILIHU2022.github.io/Actions 2 竹林里有冰的代码
安装Node.js 由于GitHub Actions没法使用Ubuntu的apt包管，所以只能使用actions/nodejs，使用@来指定版本，我这里指定的是version 3中的Node.js 21版本，代码中的actions/checkout只用于切换到该仓库;
安装相关依赖 你需要将你本地仓库中的package.json添加到GitHub仓库中，代码中是这样的:
- name: Install Dependencies run: npm install; # 分号不可省略，否则将会被识别成一条命令 npm update # 更新安装的软件（Hexo等） 为每个文件重新设定最后修改时间 这一步其实是挺重要的，Hexo框架生成每篇文章的最后修改时间的依据是该文件的最后修改时间，而对于 Github Action 的容器来说，每一个文件都刚刚被下载下来，都是最新的，这就会导致你的每一篇文章每次部署时都会被认为刚才修改过。 我们这边可以直接使用 git 记录的时间来作为文件的最后修改时间。
设置时区 Blog基本都是用来给自己看的 所以时区当然要设置成中国标准时间（东八区） 使用
export = TZ=&#39;Asia/Shanghai&#39; 生成网页 yarn build 如果不需要部署到VPS的到此处就可以了
以下是使用GitHub Pages来更新Blog（该段未完成） 若想部署到VPS，参考部署到VPS
Q:为什么我已经将GitHub Actions搞定了，且将博文上传至GitHub仓库了，但是没有更新，GitHub Actions也没有报错 A:请检查你的GitHub Pages设置（位置在Settings &gt; Pages）中的“Build and deployment”，在source中选择Deploy from a branch
将Blog部署到VPS 我懒得写，而且没有VPS，所以就直接引用竹林里有冰的内容 初始化 Github Action 容器上的 ssh 私钥应当在 Github 仓库的设置里先新建一个 secret，填入自己的 ssh 私钥（更加标准的做法应当是为 github action 专门生成一对 ssh 密钥，将公钥上传到自己的 vps，将私钥上传到 Github 仓库的 secret 中）。 我这边直接从点墨阁那边抄了点代码直接用。 使用 hexo 的 deploy 插件调用 rsync 将静态文件上传到自己服务器的对应目录（static server 你应当已经设置好了）">
  <meta itemprop="datePublished" content="2024-01-12T22:47:52+00:00">
  <meta itemprop="dateModified" content="2024-01-12T22:47:52+00:00">
  <meta itemprop="wordCount" content="102">
  <meta itemprop="keywords" content="Blog">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="实现自动更新Blog(actions-gh-page)">
  <meta name="twitter:description" content="简介 群友“竹林里有冰”的Blog有一个部署方案，如下： 我的博客部署方案
开始码GitHub Actions代码 如果不想写的话可以借鉴： 1 PILIHU2022.github.io/Actions 2 竹林里有冰的代码
安装Node.js 由于GitHub Actions没法使用Ubuntu的apt包管，所以只能使用actions/nodejs，使用@来指定版本，我这里指定的是version 3中的Node.js 21版本，代码中的actions/checkout只用于切换到该仓库;
安装相关依赖 你需要将你本地仓库中的package.json添加到GitHub仓库中，代码中是这样的:
- name: Install Dependencies run: npm install; # 分号不可省略，否则将会被识别成一条命令 npm update # 更新安装的软件（Hexo等） 为每个文件重新设定最后修改时间 这一步其实是挺重要的，Hexo框架生成每篇文章的最后修改时间的依据是该文件的最后修改时间，而对于 Github Action 的容器来说，每一个文件都刚刚被下载下来，都是最新的，这就会导致你的每一篇文章每次部署时都会被认为刚才修改过。 我们这边可以直接使用 git 记录的时间来作为文件的最后修改时间。
设置时区 Blog基本都是用来给自己看的 所以时区当然要设置成中国标准时间（东八区） 使用
export = TZ=&#39;Asia/Shanghai&#39; 生成网页 yarn build 如果不需要部署到VPS的到此处就可以了
以下是使用GitHub Pages来更新Blog（该段未完成） 若想部署到VPS，参考部署到VPS
Q:为什么我已经将GitHub Actions搞定了，且将博文上传至GitHub仓库了，但是没有更新，GitHub Actions也没有报错 A:请检查你的GitHub Pages设置（位置在Settings &gt; Pages）中的“Build and deployment”，在source中选择Deploy from a branch
将Blog部署到VPS 我懒得写，而且没有VPS，所以就直接引用竹林里有冰的内容 初始化 Github Action 容器上的 ssh 私钥应当在 Github 仓库的设置里先新建一个 secret，填入自己的 ssh 私钥（更加标准的做法应当是为 github action 专门生成一对 ssh 密钥，将公钥上传到自己的 vps，将私钥上传到 Github 仓库的 secret 中）。 我这边直接从点墨阁那边抄了点代码直接用。 使用 hexo 的 deploy 插件调用 rsync 将静态文件上传到自己服务器的对应目录（static server 你应当已经设置好了）">

	
  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        Welcome to my blog!
      
    </a>
    <div class="flex-l items-center">
      

      
      
<div class="ananke-socials">
  
</div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Posts
      </aside>
      










  <div id="sharing" class="mt3 ananke-socials">
    
  </div>


      <h1 class="f1 athelas mt3 mb1">实现自动更新Blog(actions-gh-page)</h1>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2024-01-12T22:47:52Z">January 12, 2024</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><h1 id="简介">简介</h1>
<p>群友“竹林里有冰”的Blog有一个部署方案，如下：
<a href="https://zhul.in/2022/11/04/my-blog-plan/">我的博客部署方案</a></p>
<h1 id="开始码github-actions代码">开始码GitHub Actions代码</h1>
<p>如果不想写的话可以借鉴：
<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup> <a href="https://github.com/PILIHU2022/PILIHU2022.github.io/blob/main/.github/workflows/deploy.yaml">PILIHU2022.github.io/Actions</a>
<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup> <a href="https://github.com/zhullyb/zhullyb.github.io/blob/master/.github/workflows/deploy.yml">竹林里有冰的代码</a></p>
<h2 id="安装nodejs">安装Node.js</h2>
<p>由于GitHub Actions没法使用Ubuntu的apt包管，所以只能使用<code>actions/nodejs</code>，使用@来指定版本，我这里指定的是version 3中的Node.js 21版本，代码中的<code>actions/checkout</code>只用于切换到该仓库;</p>
<h3 id="安装相关依赖">安装相关依赖</h3>
<p>你需要将你本地仓库中的package.json添加到GitHub仓库中，代码中是这样的:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span> - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Install Dependencies</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">run</span>: 
</span></span><span style="display:flex;"><span>          <span style="color:#ae81ff">npm install;</span> <span style="color:#75715e"># 分号不可省略，否则将会被识别成一条命令</span>
</span></span><span style="display:flex;"><span>          <span style="color:#ae81ff">npm update</span> <span style="color:#75715e"># 更新安装的软件（Hexo等）</span>
</span></span></code></pre></div><h2 id="为每个文件重新设定最后修改时间">为每个文件重新设定最后修改时间</h2>
<blockquote>
<p>这一步其实是挺重要的，Hexo框架生成每篇文章的最后修改时间的依据是该文件的最后修改时间，而对于 Github Action 的容器来说，每一个文件都刚刚被下载下来，都是最新的，这就会导致你的每一篇文章每次部署时都会被认为刚才修改过。
我们这边可以直接使用 git 记录的时间来作为文件的最后修改时间。</p>
</blockquote>
<h2 id="设置时区">设置时区</h2>
<p><del>Blog基本都是用来给自己看的</del>
所以时区当然要设置成中国标准时间（东八区）
使用</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#ae81ff">export = TZ=&#39;Asia/Shanghai&#39;</span>
</span></span></code></pre></div><h2 id="生成网页">生成网页</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#ae81ff">yarn build</span>
</span></span></code></pre></div><p>如果不需要部署到VPS的到此处就可以了</p>
<h1 id="以下是使用github-pages来更新blog该段未完成">以下是使用GitHub Pages来更新Blog（该段未完成）</h1>
<p>若想部署到VPS，参考<a href="#Deploy-to-VPS">部署到VPS</a></p>
<p>Q:为什么我已经将GitHub Actions搞定了，且将博文上传至GitHub仓库了，但是没有更新，GitHub Actions也没有报错
A:请检查你的GitHub Pages设置（位置在Settings &gt; Pages）中的“Build and deployment”，在source中选择Deploy from a branch</p>
<h1 id="将Blog部署到VPS">将Blog部署到VPS</h1>
<h2 id="我懒得写而且没有vps所以就直接引用竹林里有冰的内容"><del>我懒得写，而且没有VPS，所以就直接引用竹林里有冰的内容</del></h2>
<blockquote>
<p>初始化 Github Action 容器上的 ssh 私钥应当在 Github 仓库的设置里先新建一个 secret，填入自己的 ssh 私钥（更加标准的做法应当是为 github action 专门生成一对 ssh 密钥，将公钥上传到自己的 vps，将私钥上传到 Github 仓库的 secret 中）。
<img src="https://bu.dusays.com/2022/11/04/6364dbbfeb8f6.png" alt="">
我这边直接从点墨阁那边抄了点代码直接用。
使用 hexo 的 deploy 插件调用 rsync 将静态文件上传到自己服务器的对应目录（static server 你应当已经设置好了）</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#ae81ff">yarn deploy</span>
</span></span></code></pre></div></blockquote>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>我的Github Blog是直接部署到GitHub，所以省略了竹林里有冰的一些代码，可看注释掉的代码&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2">
<p>这是竹林里有冰的代码，部署到VPS中&#160;<a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>
<ul class="pa0">
  
   <li class="list di">
     <a href="/tags/blog/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Blog</a>
   </li>
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://localhost:1313/" >
    &copy;  Welcome to my blog! 2024 
  </a>
    <div>
<div class="ananke-socials">
  
</div>
</div>
  </div>
</footer>

  </body>
</html>
